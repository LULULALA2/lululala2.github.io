---
layout: post
title:  "ğŸ®Jellymodi (Jelly mood diary)"
info: "ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ë¬¼ì¸ì‹ í”„ë¡œì íŠ¸"
tech: "Python, Django, BeautifulSoup, Selenium, Colab, MeCab, Doc2Vec"
type: Team
---



![logo](https://user-images.githubusercontent.com/104331479/185329655-95f41df4-dec5-4e94-b6b8-471a0ef2deba.png)

<br>


# ![icon](https://user-images.githubusercontent.com/104331479/185330319-86af99b3-0eb2-4a75-a0c4-2b36808a3734.png){:style="float: left; margin-right: 7px;margin-top: 7px; width:40; height:40;"} &nbsp;Jellymodi (Jelly mood diary)

**ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ë¬¼ì¸ì‹ í”„ë¡œì íŠ¸**

ë„¤ì´ë²„ ì‹œë¦¬ì¦ˆì—ì„œ íŒë§¤ì¤‘ì¸ ì›¹ì†Œì„¤ ì‘í’ˆì˜ ì‘í’ˆì •ë³´ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ì–»ì€ ì¤„ê±°ë¦¬ë¥¼ ìì—°ì–´ ì²˜ë¦¬ë¥¼ í•˜ì—¬  ì›¹ì†Œì„¤ì˜ ìŠ¤í† ë¦¬ë¥¼ ë²¡í„° ì„ë² ë”©ì„ í†µí•´ ì‚¬ìš©ìê°€ ì„ í˜¸í•œ ì†Œì„¤ì˜ ì¤„ê±°ë¦¬ì™€ ìœ ì‚¬ë„ê°€ ë†’ì€ ì‘í’ˆì„ ì¶”ì²œí•´ì£¼ëŠ” ì„œë¹„ìŠ¤

<br>

**í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë‚˜ì˜ ì—­í• ** â†’ [**"ë³´ëŸ¬ê°€ê¸°ğŸ‘€"**](#í”„ë¡œì íŠ¸ì—-ëŒ€í•œ-ë‚˜ì˜-ì—­í• -ë°-ê²½í—˜)

<br>

[`ğŸ”—ì‹œì—°ì˜ìƒ`](https://tv.kakao.com/v/429054454)

<br>

![jellymodi](https://user-images.githubusercontent.com/104331479/197211223-ca6179f0-d7fb-4f7c-9d27-d8a09401c29b.png)

<br>

## í”„ë¡œì íŠ¸ ê¸°ê°„

2022-06-02 ~ 2022-06-13

<br>

## ì£¼ìš” ê¸°ëŠ¥

1. JWTë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸
1. ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì‚¬ì§„ì—ì„œ OpenCVë¥¼ ì´ìš©í•´ ì–¼êµ´ì„ ì¸ì‹í•˜ê³ , í‘œì • ë°ì´í„°ë¥¼ í•™ìŠµì‹œí‚¨ ëª¨ë¸ì„ í†µí•´ `í‘œì •ì„ íŒë³„`í•˜ì—¬ í•´ë‹¹í•˜ëŠ” ê°ì • ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ìë™ ë³€í™˜
1. ì ¤ë¦¬ëª¨ë””ë§Œì˜ ê·€ì—¬ìš´ ê°ì • í‘œí˜„ ì´ëª¨í‹°ì½˜
    <details>
    <summary>ì ¤ë¦¬í‹°ì½˜</summary>
    <div markdown="1">

    * ê° ê°ì •ì˜ 4ë²ˆ ì´ëª¨í‹°ì½˜ ì œì‘ ë‹´ë‹¹

    ![ì ¤ë¦¬í‹°ì½˜](https://user-images.githubusercontent.com/104331479/185370310-7f77facf-19a5-43e2-8b67-f8bc4e62302d.PNG)

    </div>
    </details>
1. MongoDB Atlasë¥¼ ì´ìš©í•œ ì¼ê¸° CRUD
1. ì´ëª¨í‹°ì½˜ì„ ì›”ë³„ë¡œ ë¬¶ì–´ ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ì—¬ì£¼ì–´ ë‚˜ì˜ ê°ì • ì¶”ì´ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸
1. Midea Queryë¥¼ ì´ìš©í•œ ë°˜ì‘í˜• í˜ì´ì§€

<br>

## í”„ë¡œì íŠ¸ ê¸°ë¡

>[`ğŸ”—Github`](https://github.com/cmjcum/webtachu)  
[`ğŸ”—Starting Assignment (tistory)`](https://cold-charcoal.tistory.com/85)

<br>

## íŒ€ êµ¬ì„± ë° ì—­í• 

| ì´ë¦„ | ì—­í•  | ê¹ƒí—ˆë¸Œ |
|:----------|:----------|:----------:|
| **ì´ì •ì•„&nbsp;&nbsp;&nbsp;&nbsp;** | ë©”ì¸ í˜ì´ì§€, ë”¥ëŸ¬ë‹ | [`ğŸ”—zeonga1102`](https://github.com/zeonga1102)|
| **ë…¸  ì„** | ê¸°ìˆ™ì‚¬ ë³„ í˜ì´ì§€ | [`ğŸ”—minkkky`](https://github.com/minkkky) |
| **ì´í˜„ê²½** | ê°œì¸ í˜ì´ì§€ | [`ğŸ”—LULULALA2`](https://github.com/LULULALA2)|
| **ê¹€ë™ê·¼** | ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… í˜ì´ì§€, AWS ë°°í¬&nbsp;&nbsp;&nbsp;&nbsp; | [`ğŸ”—yinmsk`](https://github.com/yinmsk) |

* ê°ì •ì¸ì‹ ë°ì´í„°ì…‹ ì „ì²˜ë¦¬ ê³¼ì •, ëª¨ë¸ ì „ì´í•™ìŠµ - íŒ€ì› ì „ì²´ ì°¸ì—¬

<br>

## ìŠ¤í‚¬ ë° ì‚¬ìš©íˆ´

`Python`, `Django`, `BeautifulSoup`, `Selenium`,`Colab`, `MeCab`, `Doc2Vec`

<br>

### ERD
![186601476-8fe8385d-8390-4747-9240-915795ca906c](https://user-images.githubusercontent.com/104331479/187063943-d493f725-7dc5-4240-8ee7-e348446cc377.png)

<br>
<br>

# í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë‚˜ì˜ ì—­í•  ë° ê²½í—˜


## ë‚˜ì˜ ì—­í• 

* í•œêµ­ì¸ ê°ì •ì¸ì‹ ë°ì´í„°ì…‹ ì „ì²˜ë¦¬ ë° ëª¨ë¸ ì „ì´í•™ìŠµ ([ê³¼ì • ë³´ëŸ¬ê°€ê¸°ğŸ‘€](#í•œêµ­ì¸-ê°ì •ì¸ì‹-ë°ì´í„°ì…‹-ì „ì²˜ë¦¬-ë°-ëª¨ë¸-ì „ì´í•™ìŠµ))
    * ëª¨ë¸í•™ìŠµì„ ìœ„í•œ ì´ë¯¸ì§€ ì²˜ë¦¬ê³¼ì • ([ê³¼ì • ë³´ëŸ¬ê°€ê¸°ğŸ‘€](#ëª¨ë¸í•™ìŠµì„-ìœ„í•œ-ì´ë¯¸ì§€-ì²˜ë¦¬ê³¼ì •))

* íšŒì›ê°€ì…/ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„

* í˜ì´ì§€ ì œì‘
    * íšŒì›ê°€ì…/ë¡œê·¸ì¸ í˜ì´ì§€
    * ê¸€ ì‘ì„± í˜ì´ì§€


<br>

### í•œêµ­ì¸ ê°ì •ì¸ì‹ ë°ì´í„°ì…‹ ì „ì²˜ë¦¬ ë° ëª¨ë¸ ì „ì´í•™ìŠµ

ê¸°ì¡´ ë°ì´í„°ì…‹ì—ì„œëŠ” ë¼ë²¨ì´ ê¸°ì¨, ë‹¹í™©, ë¶„ë…¸, ë¶ˆì•ˆ, ìƒì²˜, ìŠ¬í””, ì¤‘ë¦½ì˜ 7ê°œë¡œ ë¶„ë¥˜ë˜ì–´ìˆì—ˆëŠ”ë°, í‘œì •ë§Œ ë³´ê³ ëŠ” ì‚¬ëŒë„ ì¸ì‹í•˜ê¸° í˜ë“  í‘œì •ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— ì¸ì‹ë¥ ì„ ë†’ì´ê¸° ìœ„í•˜ì—¬ ê¸°ì¨, ìŠ¬í””, ë¶„ë…¸, ì¤‘ë¦½ì˜ 4ê°œì˜ ê°ì •ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ë¥¼ ì¤„ì˜€ë‹¤. ë˜í•œ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜ë˜ì§€ ì•Šì€ ì‚¬ì§„ì´ë‚˜ í‘œì •ì„ ì¸ì‹í•˜ê¸°ì— ì• ë§¤í•œ ì‚¬ì§„ë„ ë§ì•˜ê¸° ë•Œë¬¸ì— ëª¨ë¸ì˜ í•™ìŠµì„ ìœ„í•´ì„œ í‘œì •ì´ ëª…í™•í•œ ì‚¬ì§„ì„ ê³ ë¥´ê³  ê° ì‚¬ì§„ë“¤ì—ì„œ ì–¼êµ´ë§Œ ì˜ë¼ë‚´ëŠ” ì‘ì—…ì„ ì¶”ê°€ë¡œ ì§„í–‰í–ˆë‹¤.

ë°ì´í„° ì „ì²˜ë¦¬ í›„ì— ë§Œë“¤ì–´ì§„ ìƒˆë¡œìš´ ë°ì´í„°ì…‹ìœ¼ë¡œ ì½”ë©ì—ì„œ InceptionV3 ëª¨ë¸ì„ ì „ì´í•™ìŠµí•˜ì—¬ ì •í™•ë„ ì•½ 0.90ì˜ ê°ì •ë¶„ë¥˜ ëª¨ë¸ì„ ì œì‘í–ˆë‹¤.

(ì½”ë© : [https://colab.research.google.com/drive/1HKmdTvZSvowDDntpqg81ZUiUrp3hg4IY?usp=sharing](https://colab.research.google.com/drive/1HKmdTvZSvowDDntpqg81ZUiUrp3hg4IY?usp=sharing))

```python
from tensorflow.keras.applications.inception_v3 import InceptionV3

input = Input(shape=(224, 224, 3))
base_model = InceptionV3(weights='imagenet', include_top=False, input_tensor=input, pooling='max')

x = base_model.output
x = Dropout(rate=0.25)(x)
x = Dense(64, activation='relu')(x)
x = Dense(256, activation='relu')(x)
x = Dense(64, activation='relu')(x)
x = Dense(32, activation='relu')(x)
x = Dense(8, activation='relu')(x)
output = Dense(4, activation='softmax')(x)

model = Model(inputs=base_model.input, outputs=output)
model.compile(loss='categorical_crossentropy', optimizer=Adam(lr=0.001), metrics=['acc'])
```

<br>
<br>

# ğŸ§¨TroubleShooting

### ëª¨ë¸í•™ìŠµì„ ìœ„í•œ ì´ë¯¸ì§€ ì²˜ë¦¬ê³¼ì •
ëª¨ë¸í•™ìŠµì´ ì›í™œí•˜ê²Œ ì´ë£¨ì–´ì§€ë„ë¡ ê°ì •ì¸ì‹ë¥ ì„ ë†’ì´ê¸° ìœ„í•´ì„œ ì´ë¯¸ì§€ì—ì„œ ì‚¬ëŒ ì–¼êµ´ ë¶€ë¶„ë§Œ ê²€ì¶œí•˜ì—¬ ê°™ì€ í¬ê¸°ë¡œ ì˜ë¼ ì €ì¥í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê¸°ë¡œ í–ˆë‹¤. í•œê°€ì§€ ê°ì •ë‹¹ 1ì²œì¥ ì •ë„ë¥¼ ë¼ë²¨ë§ í•´ë†“ì•˜ê¸° ë•Œë¬¸ì— íŒŒì´ì¬ìœ¼ë¡œ ê°„ë‹¨í•œ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ í–ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë°œìƒí•œ ì˜¤ë¥˜ë¥¼ ì•„ë˜ì— ì •ë¦¬í•˜ì˜€ë‹¤.

<br>

### 1. ì–¼êµ´ì´ ì•„ë‹Œ ê²ƒì„ ì–¼êµ´ë¡œ ì¸ì‹í•˜ëŠ” ë¬¸ì œ
ì±… í‘œì§€ë‚˜ í¬ìŠ¤í„° ë“± ì–¼êµ´ì´ ì•„ë‹Œ ê²ƒì„ ì–¼êµ´ë¡œ ì¸ì‹í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.  
ì‚¬ì§„ ì†ì˜ ì–¼êµ´ í¬ê¸° í‰ê· ì¹˜ë¥¼ ê³„ì‚°í•´ì„œ ì–¼êµ´ ê²€ì¶œ ì‚¬ì´ì¦ˆë¥¼ í‰ê· í¬ê¸° ì´ìƒìœ¼ë¡œ í•œì •ì‹œì¼œì„œ ì–¼êµ´ì´ ì•„ë‹Œ ê²ƒì„ ì–¼êµ´ë¡œ ì¸ì‹í•˜ëŠ” ë¬¸ì œë¥¼ ëŒ€ë¶€ë¶„ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

<code> faces = face_cascade.detectMultiScale(gray, 1.2, minSize=(75,75)) </code>

<br>

### 2. ì‚¬ì§„ì—ì„œ ì–¼êµ´ë§Œ ì˜ë¼ ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ê³„ì† ì˜¤ë¥˜ ë°œìƒ
ë°ì´í„° ì „ì²˜ë¦¬ê³¼ì •ì—ì„œ ì‚¬ì§„ì—ì„œ ì–¼êµ´ë§Œ ì˜ë¼ ì €ì¥í•´ ëª¨ë¸ì„ í•™ìŠµì‹œí‚¤ë ¤ê³  í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° íŠ¹ì • ì‚¬ì§„ì€ ì–¼êµ´ì¸ì‹ë„ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê³ , ë‹¤ìŒ ì‚¬ì§„ìœ¼ë¡œë„ ë„˜ì–´ê°€ì§€ ì•Šê³  ê³„ì† ì˜¤ë¥˜ë¡œ ë©ˆì¶”ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

- ì´ë¯¸ì§€ í´ë” ê²½ë¡œ ìˆ˜ì • :  "\\"ì—ì„œ "/"ë¡œ ìˆ˜ì •
- íŠ¹ì • ì‚¬ì§„ì—ì„œëŠ” ì–¼êµ´ì´ ì—¬ëŸ¬ê°œ ì¸ì‹ë¨ : ì–¼êµ´ ê°ì§€ í¬ê¸°ì— ìµœì†Œ í¬ê¸°ë¥¼ ì£¼ê³  ì—¬ëŸ¬ê°œ ì¸ì‹ë˜ë©´ cropëœ ì˜ì—­ë“¤ì„ ë²ˆí˜¸ë¥¼ ë¶™ì—¬ ëª¨ë‘ ì €ì¥í•˜ê²Œ í•¨
- íŠ¹ì • ì‚¬ì§„ì—ì„œ ì–¼êµ´ì´ ì¸ì‹ë˜ì§€ ì•ŠìŒ : ì¸ì‹ì´ ì•ˆë˜ì„œ ë©ˆì¶”ë©´ ifë¬¸ìœ¼ë¡œ cropëœ ì‚¬ì§„ì´ 1ê°œ ì´ìƒì¸ ê²ƒë§Œ ë„˜ì–´ê°€ê²Œ í•¨
- ì½”ë“œê°€ ëŒì•„ê°”ëŠ”ë°ë„ ì´ë¯¸ì§€ê°€ ì €ì¥ì´ ì•ˆë¨ : ì €ì¥ ê²½ë¡œë¡œ ì§€ì •ë˜ìˆëŠ” ì´ë¯¸ì§€ í´ë”ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ì¤˜ì•¼ í•¨


\# **ì½”ë“œ ìˆ˜ì • ì „**

```python  
import cv2
import glob

# haarcascade ë¶ˆëŸ¬ì˜¤ê¸°
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')

images = glob.glob('images\*')
for image in images:
    # ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    img = cv2.imread(image)
    img = cv2.resize(img, dsize=(0, 0), fx=0.3, fy=0.3, interpolation=cv2.INTER_AREA)
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    # ì–¼êµ´ ì°¾ê¸°
    faces = face_cascade.detectMultiScale(gray, 1.3, 5)
    for (x, y, w, h) in faces:
        img_x1 = x
        img_x2 = x + w
        img_y1 = y
        img_y2 = y + h

    img = img[img_y1:img_y2, img_x1:img_x2]

    try:
        print(f'face/{image}')
        cv2.imwrite(f'face/{image}', img)
    except:
        pass
```

<br>

\# **ì½”ë“œ ìˆ˜ì • í›„**

```python  
import cv2
import glob

# haarcascade ë¶ˆëŸ¬ì˜¤ê¸°
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')

images = glob.glob('images/*')
print("images =", end=""), print(images)

result_list = []

for i in images:
    temp = i.replace("\\", "/")
    result_list.append(temp)

print("result_list = ", end=""), print(result_list)

# ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
for image in result_list:

    if "jpg" in image:
        print("image = ", end=""), print(image)

        ori_img = cv2.imread(image)
        ori_img = cv2.resize(ori_img, dsize=(0, 0), fx=0.4, fy=0.4, interpolation=cv2.INTER_AREA)
        gray = cv2.cvtColor(ori_img, cv2.COLOR_BGR2GRAY)

        # ì–¼êµ´ ì°¾ê¸°
        faces = face_cascade.detectMultiScale(gray, 1.2, minSize=(75,75))
        print("faces =", end=""), print(faces)

        cnt = 0
        for (x, y, w, h) in faces:
            img_x1 = x
            img_x2 = x + w
            img_y1 = y
            img_y2 = y + h

            img = ori_img[img_y1:img_y2, img_x1:img_x2]

            image_file_name = image.split('.')
            print("image_file_name =", end=""), print(image_file_name)
            file_name = image_file_name[0]
            extension = image_file_name[1]

            file_name += str(cnt)

            filename = 'face/images/' + file_name + '.' + extension
            print("filename =", end=""), print(filename)
            cv2.imwrite(filename, img)

            cnt += 1
```

<br>
<br>

# íšŒê³ 

>ì¼ê¸°ë¥¼ ì“´ë‹¤ëŠ” ê°„ë‹¨í•œ í–‰ìœ„ì— ê°ì •ì¸ì‹ê³¼ ì ¤ë¦¬ì´ëª¨í‹°ì½˜ì´ë¼ëŠ” ì•„ì´ë””ì–´ë¥¼ ì–¹ì–´ì„œ ì¬ë¯¸ìˆëŠ” í”„ë¡œì íŠ¸ë¡œ ë§Œë“  ê²ƒ ê°™ì•„ì„œ ì¢‹ì•˜ë‹¤. ë³µì¡í•œ ê¸°ëŠ¥ì„ ë„£ì–´ì„œ ë§Œë“  í”„ë¡œì íŠ¸ëŠ” ì•„ë‹ˆì§€ë§Œ ì²˜ìŒìœ¼ë¡œ ë¨¸ì‹ ëŸ¬ë‹ì„ í”„ë¡œì íŠ¸ì— ì—°ê²°ì‹œì¼œ ë§Œë“¤ì–´ë³¸ í”„ë¡œì íŠ¸ì—¬ì„œ ë¿Œë“¯í–ˆë‹¤. íŒ€ì›ë“¤ê³¼ ì§ì ‘ ë°ì´í„°ì…‹ ì •ë¦¬ë¶€í„° ëª¨ë¸ ì œì‘ê¹Œì§€ ë‹¤ í•¨ê»˜í–ˆë˜ ê²ƒì´ ì œì¼ ì¬ë°Œì—ˆë˜ ì¼ì´ ì•„ë‹Œê°€ ì‹¶ë‹¤. ë‚´ê°€ ì“´ ì½”ë“œ ëª‡ ì¤„ì— ëª¨ë¸ì´ í•™ìŠµì„ í•´ì„œ ê²°ê³¼ë¬¼ì„ ë³´ì—¬ì¤€ë‹¤ëŠ” ê²ƒì´ ì‹ ê¸°í–ˆë‹¤. 

>ë§¤ë²ˆ ì¼ì£¼ì¼ì´ ì•ˆë˜ëŠ” ì§§ì€ ì‹œê°„ë™ì•ˆ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë‹ˆ í•­ìƒ ì‹œê°„ì— ì«“ê²¨ í”„ë¡œì íŠ¸ë¥¼ ë§ˆê°í•˜ê³ ëŠ” í•˜ëŠ”ë°, ë…¸ì…˜ìœ¼ë¡œ ì¼ì •ê´€ë¦¬ë¥¼ í•´ë³´ë‹ˆ ì´ë²ˆì—ëŠ” ì¢€ ë” ì—¬ìœ ë¡­ê²Œ í”„ë¡œì íŠ¸ë¥¼ ë§ˆê°í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤. ì§§ì€ ì‹œê°„ì´ì—ˆì§€ë§Œ ê¸°íší•œëŒ€ë¡œ ë‹¤ ì™„ì„±ì„ í–ˆê³ , ë‚˜ì¤‘ì— ì–´í”Œë¡œ ì¶œì‹œí•´ë³´ê³  ì‹¶ì€ ê·€ì—¬ìš´ ëª¨ì–‘ìƒˆê°€ ë‚˜ì™€ì„œ ë§Œì¡±ìŠ¤ëŸ¬ì› ë‹¤.
